# ---------------------------------------------------------------------------- #
#                                  Install UV                                  #
# ---------------------------------------------------------------------------- #

# ---------------------------------- Windows --------------------------------- #

powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"

# ----------------------------------- Linux ---------------------------------- #

curl -LsSf https://astral.sh/uv/install.sh | sh

# ---------------------------------------------------------------------------- #
#                                    Upgrade                                   #
# ---------------------------------------------------------------------------- #

uv self update

# ---------------------------------------------------------------------------- #
#                           Init project in is folder                          #
# ---------------------------------------------------------------------------- #

uv init

# ---------------------------------------------------------------------------- #
#                           Init project in is folder                          #
# ---------------------------------------------------------------------------- #

ยง
uv venv my-name Own name
uv venv --python 3.13 specific python version

# ---------------------------------------------------------------------------- #
#                             Typical dev approach                             #
# ---------------------------------------------------------------------------- #

uv venv
uv pip install --project .
uv pip install --editable .

# ---------------------------------------------------------------------------- #
#                             Activate project venv                            #
# ---------------------------------------------------------------------------- #

# ---------------------------------- Windows --------------------------------- #

.venv\Scripts\activate

# ----------------------------------- Linux ---------------------------------- #

source .venv/bin/activate

# ---------------------------------------------------------------------------- #
#         Add all dependencies from `requirements.txt`. or use UV sync         #
# ---------------------------------------------------------------------------- #

uv add -r requirements.txt

# ---------------------------------------------------------------------------- #
#                          Ensures to run inside venv                          #
# ---------------------------------------------------------------------------- #

uv run hello.py

# ---------------------------------------------------------------------------- #
#                                Sync venv with                                #
# ---------------------------------------------------------------------------- #

uv sync

# ---------------------------------------------------------------------------- #
#                               Update lock file                               #
# ---------------------------------------------------------------------------- #

uv lock --check
uv lock --upgrade
uv lock

# ---------------------------------------------------------------------------- #
#                             List python versions                             #
# ---------------------------------------------------------------------------- #

uv python list
uv python install 3.12

# ---------------------------------------------------------------------------- #
#           "litellm[proxy]==1.57.4" since no higher works on windows          #
# ---------------------------------------------------------------------------- #

pip install 'litellm[proxy]'

# ---------------------------------------------------------------------------- #
#                           Convert .ui files to .py                           #
# ---------------------------------------------------------------------------- #

pyside6-uic.exe .\ui\collector.ui -o .\ui\ui_collector.py

# ---------------------------------------------------------------------------- #
#                    Add pip to uv for proj master root venv                   #
# ---------------------------------------------------------------------------- #

Invoke-WebRequest -Uri https://bootstrap.pypa.io/get-pip.py -OutFile get-pip.py
python get-pip.py
python -m pip install --upgrade pip
Remove-Item get-pip.py

# ---------------------------------------------------------------------------- #
#                     Create no pass jump to 87 through 143                    #
# ---------------------------------------------------------------------------- #

# ------------------------------- Tunnel script ------------------------------ #

./setup.sh

# ---------------------------------- Manual ---------------------------------- #

cd ~/.ssh/
ssh-keygen -t ed25519 -f laptop134to87

# ---------------------------------- config ---------------------------------- #

Host 137.58.231.134
  User emvekta
  StrictHostKeyChecking accept-new
  IdentityFile C:\Users\emvekta\.ssh\laptop134to87
  IdentitiesOnly yes
  ServerAliveInterval 60
  ServerAliveCountMax 6

Host 172.16.87.1
  User emvekta
  StrictHostKeyChecking accept-new
  IdentityFile C:\Users\emvekta\.ssh\laptop134to87
  IdentitiesOnly yes
  ServerAliveInterval 60
  ServerAliveCountMax 6
  ProxyJump jump

# ---------------------------------------------------------------------------- #

# ----------------------------------- sshd ----------------------------------- #

ClientAliveInterval 300
ClientAliveCountMax 50
UseDNS no
Compression delayed
Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr

# ---------------------------------------------------------------------------- #

ssh-copy-id -i laptop134to87 emvekta@137.58.231.134
ssh-copy-id -i laptop134to87 -o "ProxyJump emvekta@137.58.231.134" emvekta@172.16.87.1
